"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[524],{1906:(e,t,n)=>{n(1629),n(6099),n(8992),n(3949),n(3500),n(6031);function a(){var e=document.querySelectorAll(".carousel-slide"),t=0,n=null;function a(t){e.forEach(function(e){return e.classList.remove("active")}),e[t].classList.add("active")}0!==e.length&&(a(t),n&&(clearInterval(n),n=null),n=setInterval(function(){a(t=(t+1)%e.length)},5e3))}function o(){var e=document.querySelector(".animals-carousel"),t=document.querySelectorAll(".carousel-card"),n=document.querySelectorAll(".indicator-dot"),a=document.querySelector(".carousel-prev"),o=document.querySelector(".carousel-next");if(e&&0!==t.length){var i=0,c=!1;n.forEach(function(e,t){e.addEventListener("click",function(){d(t)})}),a&&a.addEventListener("click",function(){d(0===i?t.length-1:i-1)}),o&&o.addEventListener("click",function(){d(i===t.length-1?0:i+1)}),t.forEach(function(e){e.querySelectorAll("a[href]").forEach(function(t){t.addEventListener("click",function(t){if(!e.classList.contains("center"))return t.preventDefault(),t.stopPropagation(),!1})})}),t.forEach(function(e,t){e.addEventListener("click",function(n){var a=n.target;a.closest(".action-btn")||a.closest(".view-btn")||(n.preventDefault(),n.stopPropagation(),c||e.classList.contains("center")||d(t))})}),document.addEventListener("keydown",function(e){if("ArrowLeft"===e.key)d(0===i?t.length-1:i-1);else if("ArrowRight"===e.key){d(i===t.length-1?0:i+1)}});var r=0,s=0;e.addEventListener("touchstart",function(e){r=e.changedTouches[0].screenX},!1),e.addEventListener("touchend",function(e){s=e.changedTouches[0].screenX,function(){var e=50,n=r-s;if(Math.abs(n)>e){if(n>0)d(i===t.length-1?0:i+1);else d(0===i?t.length-1:i-1)}}()},!1),l()}function l(){t.forEach(function(e,n){e.classList.remove("center","left","right","back-left","back-right","far-back-left","far-back-right","hidden","hidden-right");var a=n-i;switch(a>t.length/2?a-=t.length:a<-t.length/2&&(a+=t.length),a){case 0:e.classList.add("center");break;case-1:e.classList.add("left");break;case 1:e.classList.add("right");break;case-2:e.classList.add("back-left");break;case 2:e.classList.add("back-right");break;case-3:e.classList.add("far-back-left");break;case 3:e.classList.add("far-back-right");break;default:a<0?e.classList.add("hidden"):e.classList.add("hidden-right")}}),n.forEach(function(e,t){e.classList.toggle("active",t===i)})}function d(e){e>=0&&e<t.length&&e!==i&&(i=e,l(),c=!0,setTimeout(function(){c=!1},300))}}n(8459);n(6918),n(3792),n(3288),n(8781),n(7764),n(2953),n(8408),n(4603),n(7566),n(8721);n(9089),n(739),n(3110),n(6033),n(3362),n(9391);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";document.querySelectorAll(".notification").forEach(function(e){return e.remove()});var n=document.createElement("div");n.className="notification notification-".concat(t),n.textContent=e;var a={success:"#10B981",error:"#EF4444",info:"#3B82F6",warning:"#F59E0B"};if(n.style.cssText="\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ".concat(a[t]||a.info,";\n        color: white;\n        padding: 12px 20px;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        z-index: 1000;\n        font-weight: 500;\n        animation: slideInRight 0.3s ease;\n        max-width: 300px;\n        font-size: 14px;\n    "),!document.querySelector("#notification-styles")){var o=document.createElement("style");o.id="notification-styles",o.textContent="\n            @keyframes slideInRight {\n                from {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n                to {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n            }\n\n            @keyframes slideOutRight {\n                from {\n                    transform: translateX(0);\n                    opacity: 1;\n                }\n                to {\n                    transform: translateX(100%);\n                    opacity: 0;\n                }\n            }\n        ",document.head.appendChild(o)}document.body.appendChild(n),setTimeout(function(){n.style.animation="slideOutRight 0.3s ease",setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n)},300)},4e3)}var c=!1;function r(e){return console.log("[FAVORITE-API] POST /api/favorites with animalId: ".concat(e)),fetch("/api/favorites",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({animalId:e})}).then(function(e){return console.log("[FAVORITE-API] Response status: ".concat(e.status)),e.json().then(function(t){return console.log("[FAVORITE-API] Response data:",t),{status:e.status,data:t}})}).then(function(e){e.status;var t=e.data;return t.success?(i("Ajouté aux favoris !","success"),!0):(console.warn("[FAVORITE-API] API returned success=false: ".concat(t.message)),i(t.message||"Erreur lors de l'ajout aux favoris","error"),!1)}).catch(function(e){return console.error("[FAVORITE-API] Fetch error:",e),i("Vous devez être connecté pour ajouter un animal à vos favoris","error"),!1})}function s(e){return fetch("/api/favorites/".concat(e),{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(e){return e.success?(i("Retiré des favoris","info"),!0):(i(e.message||"Erreur lors de la suppression","error"),!1)}).catch(function(e){return i("Erreur lors de la suppression","error"),!1})}var l=new Map;n(8706);function d(){document.querySelectorAll(".tag[data-tooltip], .tag-mini[data-tooltip]").forEach(function(e){e.addEventListener("mouseenter",function(e){if(this.getAttribute("data-tooltip")){var t=this.getBoundingClientRect(),n=this;setTimeout(function(){window.getComputedStyle(n,"::before");t.left<150?n.style.setProperty("--tooltip-align","left"):t.right>window.innerWidth-150&&n.style.setProperty("--tooltip-align","right")},10)}}),e.addEventListener("mouseleave",function(){this.style.removeProperty("--tooltip-align")}),e.addEventListener("click",function(e){if(window.innerWidth<=768){e.preventDefault();var t=this.getAttribute("data-tooltip"),n=this.getAttribute("data-tag-name");t&&function(e,t){var n=document.querySelector(".tag-modal");n&&n.remove();var a=document.createElement("div");a.className="tag-modal",a.innerHTML='\n        <div class="tag-modal-content">\n            <div class="tag-modal-header">\n                <h3>'.concat(e,'</h3>\n                <button class="tag-modal-close">&times;</button>\n            </div>\n            <div class="tag-modal-body">\n                <p>').concat(t,'</p>\n            </div>\n        </div>\n        <div class="tag-modal-backdrop"></div>\n    '),document.body.appendChild(a);var o=a.querySelector(".tag-modal-close"),i=a.querySelector(".tag-modal-backdrop"),c=function(){a.style.animation="fadeOut 0.3s ease",setTimeout(function(){a.parentNode&&a.parentNode.removeChild(a)},300)};o.addEventListener("click",c),i.addEventListener("click",c);var r=function(e){"Escape"===e.key&&(c(),document.removeEventListener("keydown",r))};document.addEventListener("keydown",r)}(n,t)}})})}function u(){c||(c=!0,document.addEventListener("click",function(e){var t=e.target.closest(".favorite-btn");if(t){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();var n=Date.now();if(!(n-(l.get(t)||0)<500)){l.set(t,n);var a=t.dataset.animalId,o=t.querySelector("i"),i=t.classList.contains("favorited");t.disabled||"true"===t.dataset.processing||(t.disabled=!0,t.dataset.processing="true",i?s(a).then(function(e){e&&(t.classList.remove("favorited"),o.classList.remove("fas"),o.classList.add("far"),t.title="Ajouter aux favoris")}).finally(function(){t.disabled=!1,t.dataset.processing="false"}):r(a).then(function(e){e&&(t.classList.add("favorited"),o.classList.remove("far"),o.classList.add("fas"),t.title="Retirer des favoris")}).finally(function(){t.disabled=!1,t.dataset.processing="false"}),t.style.transform="scale(1.2)",setTimeout(function(){t.style.transform=""},200))}}})),document.querySelectorAll(".animal-card").forEach(function(e){if(!e.classList.contains("carousel-card")){e.addEventListener("click",function(e){if(!(e.target.closest(".action-btn")||e.target.closest(".see-more-btn")||e.target.closest(".card-actions"))){var t=this.dataset.animalId;t&&(window.location.href="/animals/".concat(t))}});var t=e.querySelector(".card-image img");t&&(e.addEventListener("mouseenter",function(){t.style.transform="scale(1.05)"}),e.addEventListener("mouseleave",function(){t.style.transform="scale(1)"}))}}),document.querySelectorAll(".see-more-btn").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=this.dataset.animalId;window.location.href="/animals/".concat(t)})}),d()}function f(){document.querySelectorAll(".contact-btn").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=this.dataset.animalId,n=this.dataset.associationId;m(t?"/contact/animal/".concat(t):n?"/contact/association/".concat(n):"/contact")})})}function m(e){var t=document.createElement("div");t.className="contact-modal-overlay",t.innerHTML='\n        <div class="contact-modal">\n            <button class="contact-modal-close">&times;</button>\n            <div class="contact-modal-body">\n                <div class="loader">\n                    <i class="fas fa-spinner fa-spin"></i> Chargement...\n                </div>\n            </div>\n        </div>\n    ',document.body.appendChild(t),document.body.style.overflow="hidden",fetch(e).then(function(e){return e.text()}).then(function(e){t.querySelector(".contact-modal-body").innerHTML=e,function(e){var t=e.querySelector(".contact-form-ajax");if(!t)return;t.addEventListener("submit",function(n){n.preventDefault();var a=t.querySelector(".btn-submit-contact"),o=a.innerHTML;a.disabled=!0,a.innerHTML='<i class="fas fa-spinner fa-spin"></i> Envoi en cours...';var c=new FormData(t);fetch(t.action,{method:"POST",body:c,headers:{"X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(t){t.success?(i(t.message,"success"),v(e)):(i(t.message,"error"),a.disabled=!1,a.innerHTML=o)}).catch(function(e){i("Erreur lors de l'envoi du message","error"),a.disabled=!1,a.innerHTML=o})})}(t)}).catch(function(e){i("Erreur lors du chargement du formulaire","error"),v(t)}),t.querySelector(".contact-modal-close").addEventListener("click",function(){return v(t)}),t.addEventListener("click",function(e){e.target===t&&v(t)});var n=function(e){"Escape"===e.key&&(v(t),document.removeEventListener("keydown",n))};document.addEventListener("keydown",n)}function v(e){e.style.opacity="0",setTimeout(function(){e.remove(),document.body.style.overflow=""},300)}window.AnimalCards={addFavorite:r,removeFavorite:s,showNotification:i,initializeTooltips:d},window.ContactModal={open:m,close:v,initialize:f};n(2010);function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Aucun fichier",a=document.querySelector(e),o=document.querySelector(t);a&&o&&(o.textContent=n,a.addEventListener("change",function(){this.files&&this.files.length>0?o.textContent=this.files[0].name:o.textContent=n}))}function y(){var e=document.getElementById("modale-flash");e&&(e.style.display="none")}!function(){var e="auth-fadeout-styles";if(!document.getElementById(e)){var t=document.createElement("style");t.id=e,t.textContent="\n        @keyframes fadeOut {\n            0% {\n                opacity: 1;\n                filter: blur(0);\n                transform: translateX(0);\n            }\n            100% {\n                opacity: 0;\n                filter: blur(5px);\n                transform: translateX(-40px);\n            }\n        }\n    ",document.head.appendChild(t)}}(),document.addEventListener("DOMContentLoaded",function(){window.fermerModale=y,document.querySelectorAll("[data-file-input-display]").forEach(function(e){var t=e.getAttribute("data-file-input-display"),n=document.getElementById(t);if(n){var a=n.textContent||"Aucun fichier";h("#".concat(e.id),"#".concat(t),a)}}),function(){var e=document.getElementById("burgerToggle"),t=document.getElementById("mobileMenu"),n=document.getElementById("closeMenu"),a=(document.querySelector(".mobile-menu-content"),document.querySelector(".mobile-menu-overlay")),o=document.querySelectorAll(".mobile-nav-links a, .mobile-auth-link");if(e&&t){var i=document.getElementById("actionMenuToggle"),c=document.getElementById("actionMenu");e.addEventListener("click",function(){e.classList.toggle("active"),t.classList.toggle("active"),document.body.style.overflow=t.classList.contains("active")?"hidden":""}),n&&n.addEventListener("click",l),a&&a.addEventListener("click",l),o.forEach(function(e){e.addEventListener("click",l)});var r,s=document.querySelector(".action-menu-wrapper");s&&(s.addEventListener("mouseenter",function(){clearTimeout(r),c&&(c.classList.add("active"),i.classList.add("active"))}),s.addEventListener("mouseleave",function(){r=setTimeout(function(){d()},100)}),c&&c.querySelectorAll("a").forEach(function(e){e.addEventListener("click",d)}))}function l(){e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow="",d()}function d(){c&&(c.classList.remove("active"),i.classList.remove("active"))}}(),function(){var e=document.getElementById("mobileActionToggle"),t=document.getElementById("mobileActionMenu");function n(){e.classList.remove("active"),t.classList.remove("active")}e&&t&&(e.addEventListener("click",function(){e.classList.toggle("active"),t.classList.toggle("active")}),t.querySelectorAll(".mobile-action-link").forEach(function(e){e.addEventListener("click",n)}))}(),document.querySelector(".hero-carousel")&&a(),document.querySelector(".animals-carousel")&&o(),document.querySelector(".news-carousel")&&document.querySelectorAll(".news-carousel").forEach(function(e){var t=e.querySelector(".news-track");if(t){var n=t.querySelectorAll(".news-card");if(0!==n.length){var a=0;n.forEach(function(e){a+=e.offsetWidth+parseFloat(getComputedStyle(t).gap||0)});var o,i,c=a/2,r=e.classList.contains("news-carousel-right"),s=r?0:-c,l=c/35,d=!1;o=requestAnimationFrame(function e(n){i||(i=n);var a=n-i;i=n,d||(r?(s-=l*a/1e3)<=-c&&(s=0):(s+=l*a/1e3)>=0&&(s=-c),t.style.transform="translate3d(".concat(s,"px, 0, 0)")),o=requestAnimationFrame(e)}),e.addEventListener("mouseenter",function(){d=!0}),e.addEventListener("mouseleave",function(){d=!1,i=null}),window.addEventListener("beforeunload",function(){o&&cancelAnimationFrame(o)})}}});var e,t=document.querySelector(".scroll-indicator");t&&(t.addEventListener("click",function(){var e=document.querySelector(".oldest-animals-section");e&&e.scrollIntoView({behavior:"smooth"})}),t.style.cursor="pointer"),(document.querySelector(".animals-grid")||document.querySelector(".animals-carousel")||document.querySelector(".favorite-btn"))&&u(),document.querySelectorAll(".contact-btn").length>0&&f(),document.querySelectorAll("[data-toggle-reply]").length>0&&document.querySelectorAll("[data-toggle-reply]").forEach(function(e){e.addEventListener("click",function(){var e=this.dataset.toggleReply,t=document.getElementById("reply-form-"+e);t&&(t.style.display="none"===t.style.display?"block":"none")})}),document.getElementById("authWrapper")&&function(){var e=document.getElementById("authWrapper");if(e){var t,n,a=document.getElementById("sign-up-btn"),o=document.getElementById("sign-in-btn");document.getElementById("loginForm"),document.getElementById("registerForm"),a&&a.addEventListener("click",s),o&&o.addEventListener("click",function(){e.classList.remove("sign-up-mode"),document.querySelectorAll(".register-panel .animation").forEach(function(e,t){e.style.animation="fadeOut 0.6s ease-in-out ".concat(.1*t,"s forwards")}),document.querySelectorAll(".login-panel .animation").forEach(function(e,t){setTimeout(function(){e.style.animation="animate 0.6s ease-in-out ".concat(.1*t,"s forwards")},300)})}),document.querySelectorAll(".register-panel .form-error").length>0?s():(t=document.querySelectorAll(".login-panel .animation"),n=document.querySelectorAll(".info-panel .animation"),t.forEach(function(e,t){setTimeout(function(){e.style.animation="animate 0.6s ease-in-out forwards"},100*t)}),n.forEach(function(e,t){setTimeout(function(){e.style.animation="animate 0.6s ease-in-out forwards"},100*t+200)})),document.querySelectorAll(".input-box input").forEach(function(e){e.value&&e.classList.add("has-value"),e.addEventListener("focus",function(){this.parentElement.classList.add("focused")}),e.addEventListener("blur",function(){this.value?this.classList.add("has-value"):(this.parentElement.classList.remove("focused"),this.classList.remove("has-value"))}),e.addEventListener("input",function(){this.value?this.classList.add("has-value"):this.classList.remove("has-value")})});var i=document.querySelectorAll('input[name="register_form[association_choice]"]'),c=document.querySelector(".association-select"),r=document.querySelector(".new-association-field");i.length>0&&i.forEach(function(e){e.addEventListener("change",function(){var e=this.value;c&&(c.style.display="none",c.removeAttribute("required")),r&&(r.style.display="none",r.removeAttribute("required")),"join"===e&&c?(c.style.display="block",c.setAttribute("required","required")):"create"===e&&r&&(r.style.display="block",r.setAttribute("required","required"))})}),h("#register_imageFile_file","#file-name-display")}function s(){e.classList.add("sign-up-mode"),document.querySelectorAll(".login-panel .animation").forEach(function(e,t){e.style.animation="fadeOut 0.6s ease-in-out ".concat(.1*t,"s forwards")}),document.querySelectorAll(".register-panel .animation").forEach(function(e,t){setTimeout(function(){e.style.animation="animate2 0.6s ease-in-out ".concat(.1*t,"s forwards")},300)})}}(),document.querySelector(".search-form")&&(e=document.querySelector(".search-btn"))&&e.addEventListener("click",function(e){e.preventDefault();var t=document.getElementById("type-select").value,n=document.getElementById("sexe-select").value,a=document.getElementById("department-select").value,o=new URLSearchParams;t&&o.set("species",t),n&&o.set("sexe",n),a&&o.set("department",a);var i=o.toString(),c=i?"/animals?".concat(i):"/animals";window.location.href=c}),document.querySelectorAll('input[name="association_id"]').length>0&&function(){var e=document.querySelectorAll('input[name="association_id"]'),t=document.getElementById("joinBtn");0!==e.length&&t&&e.forEach(function(e){e.addEventListener("change",function(){t.disabled=!1})})}()})}},e=>{e.O(0,[618],()=>{return t=1906,e(e.s=t);var t});e.O()}]);